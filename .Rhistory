# Carregar as bibliotecas
library(readr)
library(dplyr)
library(ggplot2)
library(tsibble) # Essencial para o formato 'tsibble'
library(fable) # O fpp3 carrega este e outros pacotes
library(feasts) # Contém a função gg_season()
# Ler o arquivo CSV
df <- read_csv("DailyDelhiClimateTrain.csv")
head(df)
# Converter o dataframe 'df' para um objeto 'tsibble'.
# Usamos a coluna 'date' como o índice temporal (index).
df_ts <- df %>%
mutate(date = as.Date(date)) %>% # Garante que a coluna 'date' está no formato de data
as_tsibble(index = date)
# Para gerar o gráfico comparando as séries, usamos 'df_ts'.
# A função `pivot_longer()` é usada para transformar as colunas em linhas.
df_ts %>%
pivot_longer(
cols = c(meantemp, humidity, wind_speed, meanpressure),
names_to = "name",
values_to = "value"
) %>%
ggplot(aes(x = date, y = value, colour = name)) + # Usamos 'date' no eixo X
geom_line() +
facet_grid(name ~ ., scales = "free_y") +
labs(
title = "Séries Temporais das Variáveis Climáticas",
subtitle = "Diárias de Delhi",
y = "Valores"
) +
theme_minimal()
View(df)
View(df)
print(df)
install.packages("fpp3")
install.packages("TSA")
install.packages("forecast")
## Bibliotecas de séries temporais
library(TSA)
library(forecast)
library(fpp3)
library(readr)
library(ggplot2)
library(dplyr)
df <- read_csv("DailyDelhiClimateTrain.csv")
view(df)
serie <- df %>%
mutate(Quarter = yearmonth(date)) %>%
as_tibble(index = Quarter)
serie
serie %>%
pivot_longer(-Quarter) %>%
ggplot(aes(x = Quarter, y = value, colour = name)) +
geom_line()+
facet_grid(name ~ .,scales = "free_y")
### Plot das series
serie %>%
pivot_longer(-Quarter) %>%
ggplot(aes(x = Quarter, y = value, colour = name)) +
geom_line() +
facet_grid(name ~ ., scales = "free_y")
# Plot das series
serie %>%
pivot_longer(cols = -Quarter, # Especifica todas as colunas exceto Quarter
names_to = "variable",
values_to = "value") %>%
ggplot(aes(x = Quarter, y = value, colour = variable)) +
geom_line() +
facet_grid(variable ~ ., scales = "free_y") +
labs(title = "Séries Temporais", x = "Trimestre", y = "Valor") +
theme_minimal()
head(serie)
# Plot das series
# Plot das series - exclua ambas as colunas de data
serie %>%
pivot_longer(cols = -c(date, Quarter),  # Exclui ambas colunas temporais
names_to = "variable",
values_to = "value") %>%
ggplot(aes(x = Quarter, y = value, colour = variable)) +
geom_line() +
facet_grid(variable ~ ., scales = "free_y") +
labs(title = "Séries Temporais", x = "Trimestre", y = "Valor") +
theme_minimal()
serie %>%
gg_season(Sales, labels = "both") +
labs(y = "Quantidade de vendas",
title = "Sazonalidade: Sales")
serie %>%
gg_season(humidity, labels = "both") +
labs(y = "Quantidade de vendas",
title = "Sazonalidade: Sales")
serie %>%
gg_season(meantemp, labels = "both") +
labs(y = "Quantidade de vendas",
title = "Sazonalidade: Sales")
## Transformando a variavel Sales no formato TS
y = ts( df$date, start = 2013,end = 2017,  frequency = 4  )
plot.ts( y  )
rm(y)
## Transformando a variavel Sales no formato TS
y = ts( df$meantemp, start = 2013,end = 2017,  frequency = 4  )
plot.ts( y  )
head(df)
# Gráfico da Variável Humidity
y_01 = ts( df$humidity, start = 2013,end = 2017,  frequency = 4  )
plot.ts( y_01  )
# Gráfico da Variável Humidity
y_02 = ts( df$wind_speed, start = 2013,end = 2017,  frequency = 4  )
plot.ts( y_02  )
# Gráfico da Variável Meantemp
y_01 = ts( df$meantemp, start = 2013,end = 2017,  frequency = 4  )
plot.ts( y_01  )
# Gráfico da Variável Humidity
y_02 = ts( df$humidity, start = 2013,end = 2017,  frequency = 4  )
plot.ts( y_02  )
# Gráfico da Variável Humidity
y_03 = ts( df$wind_speed, start = 2013,end = 2017,  frequency = 4  )
plot.ts( y_03  )
# Gráfico da Variável Humidity
y_04 = ts( df$meanpressure, start = 2013,end = 2017,  frequency = 4  )
plot.ts( y_04  )
serie %>%
gg_season(meantemp, labels = "both") +
labs(y = "Quantidade de vendas",
title = "Sazonalidade: Sales")
### Criando a variável Quarter (variável que indica trimestre)
serie <- df %>%
mutate(Quarter = yearmonth(date)) %>%
as_tibble(index = Quarter)
serie
serie %>%
gg_season(Quarter, labels = "both") +
labs(y = "Quantidade de vendas",
title = "Sazonalidade: Sales")
serie %>%
gg_season(y_01, labels = "both") +
labs(y = "Quantidade de vendas",
title = "Sazonalidade: Sales")
serie %>%
gg_season(y_01, labels = "both") +
labs(y = "Quantidade de vendas",
title = "Sazonalidade: Sales")
typeof(serie)
serie
view(serie)
# Plot das series - exclua ambas as colunas de data
serie %>%
pivot_longer(cols = -c(date, Quarter),  # Exclui ambas colunas temporais
names_to = "variable",
values_to = "value") %>%
ggplot(aes(x = Quarter, y = value, colour = variable)) +
geom_line() +
facet_grid(variable ~ ., scales = "free_y") +
labs(title = "Séries Temporais", x = "Trimestre", y = "Valor") +
theme_minimal()
serie %>%
gg_season(meantemp, labels = "both") +
labs(y = "Tempo Médio",
title = "Sazonalidade: Meantemp")
serie %>%
gg_season(Quarter, labels = "both") +
labs(y = "Tempo Médio",
title = "Sazonalidade: Meantemp")
### Criando a variável Quarter (variável que indica trimestre)
serie <- df %>%
mutate(Quarter = yearmonth(date)) %>%
as_tibble(index = Quarter)
serie %>%
gg_season(Quarter, labels = "both") +
labs(y = "Tempo Médio",
title = "Sazonalidade: Meantemp")
### Criando a variável Quarter (variável que indica trimestre)
serie <- df %>%
mutate(Quarter = yearmonth(date)) %>%
as_tsibble(index = Quarter)
### Criando a variável Quarter (variável que indica trimestre)
serie <- df %>%
mutate(Quarter = yearmonth(date)) %>%
as_tsibble(index = Quarter)
duplicates(serie$Quarter)
duplicates(serie$Quarter)
### Criando a variável Quarter (variável que indica trimestre)
serie <- df %>%
mutate(Quarter = yearmonth(date)) %>%
as_tsibble(index = Quarter)
View(serie)
serie
serie <- as_tsibble(serie, index =serie$Quarter)
serie <- as_tsibble(serie, index =Quarter)
serie <- as_tsibble(df, index =Quarter)
serie %>%
gg_season(Quarter, labels = "both") +
labs(y = "Tempo Médio",
title = "Sazonalidade: Meantemp")
# Método recomendado: agregar por média
serie <- df %>%
mutate(Quarter = yearmonth(date)) %>%
group_by(Quarter) %>%
summarise(
meantemp = mean(meantemp, na.rm = TRUE),
humidity = mean(humidity, na.rm = TRUE),
wind_speed = mean(wind_speed, na.rm = TRUE),
meanpressure = mean(meanpressure, na.rm = TRUE)
) %>%
as_tsibble(index = Quarter)
# Agora o gráfico deve funcionar
serie %>%
gg_season(meantemp, labels = "both") +
labs(y = "Tempo Médio",
title = "Sazonalidade: Meantemp")
